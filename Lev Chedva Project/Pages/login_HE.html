<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../styles/LogIn_style_HE.css">
    <title>התחברות</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script src="../firebase.js"></script>
  </head>
  <body>
    <div class="logo-container">
      <img src="../Pictures/logoLevChedva.png" alt="Logo">
    </div>
    <h1>התחברות</h1>
    <form id="login-form">
      <label for="email">:אימייל</label>
      <input type="email" id="email" name="email" required>
      <label for="password">:סיסמא</label>
      <input type="password" id="password" name="password" required>
      <button type="submit">היכנס</button>
      <p>
        <a id="forgot-password-link" href="#" onclick="forgotPassword()">שכחתי סיסמא</a>
      </p>
    </form>

    <div id="error-message" class="error-message"></div>

    <script>
      // Get references to the email and password input fields
const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");

// Get a reference to the login form
const loginForm = document.getElementById("login-form");

// Get a reference to the error message element
const errorMessage = document.getElementById("error-message");

// Add an event listener to the login form
loginForm.addEventListener("submit", (event) => {
  event.preventDefault();

  // Get the email and password values from the form
  const email = emailInput.value;
  const password = passwordInput.value;

  // Log in the user using Firebase Authentication
  firebase
    .auth()
    .signInWithEmailAndPassword(email, password)
    .then(() => {
      // Logged in successfully
      console.log("Logged in");
      window.location.href = "https://www.google.com"; //change it to the website page
    })
    .catch((error) => {
      // Handle login errors
      const errorCode = error.code;
      const errorMessage = error.message;
      console.error(errorCode, errorMessage);

      // Display the error message to the user
      displayErrorMessage(errorCode);
    });
});

function displayErrorMessage(errorCode) {
  let errorMessageText = "";

  switch (errorCode) {
    case "auth/user-not-found":
      errorMessageText = "כתובת האימייל שגויה";
      break;
    case "auth/wrong-password":
      errorMessageText = "הסיסמא שגויה";
      break;
    default:
      errorMessageText = "אירעה שגיאה";
  }

  errorMessage.textContent = errorMessageText;
}

    </script>
  </body>
</html>
